{% load static %}
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        
        <!-- Custom CSS file -->
        <link rel="stylesheet" type="text/css" href="{% static 'main/style.css' %}">
        <!-- Bootstrap CDN -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
        
        <title>Sample Response Screen</title>
    </head>

    <body>
        <div id="page-container">
            <div id="container-fluid">
                <!-- Page Header -->
                <div class="row">
                    <h1 class="display-4 text-center mx-auto d-block">Sample Response Screen</h1>
                </div>

                <!-- Page Spacer -->
                <div class="spacer"></div>

                <!-- Main Content -->
                <div class="row">
                    <main role="main" class="col-8 mx-auto px-4">

                        <!-- Eventually, replace action with "/dbtools/{{gf_id}}/record_response", with method="POST" -->
                        <form class="needs-validation" action="" enctype="multipart/form-data" novalidate> <!-- User Response form -->
                        {% csrf_token %}
                        <!-- Participant Name -->
                        <div class="custom-form-box">
                            <div class="form-row align-items-center">
                                <div class="form-group col-5 my-1">
                                    <label for="participantNameForm">Full Name</label>
                                    <input type="text" class="form-control" id="participantNameForm" name="participantNameForm" required>
                                    <div id="participantNameForm_error" class="invalid-feedback">
                                        Must enter your name.
                                    </div>
                                </div>
                                <div class="form-group col-7 my-1">
                                    <label for="participantEmailForm">E-mail</label>
                                    <input type="text" class="form-control" id="participantEmailForm" name="participantEmailForm" required>
                                    <div id="participantEmailForm_error" class="invalid-feedback">
                                        Must enter your e-mail.
                                    </div>
                                </div>
                            </div>
                        </div>
                        <br>

                        <!-- Project Listings -->
                        {% if projects %}
                            {% for proj in projects %}
                            <div class="custom-form-box">
                                <h4>{{ proj.project_name }}</h4>
                                <p>{{ proj.project_description }}</p>
                                <div class="form-row align-items-center">
                                    <div class="form-group col-auto my-1">
                                        <label for="projForm{{ proj.pk }}">Preference:</label>
                                        <select class="form-control" id="projForm{{ proj.pk }}" name="projForm{{ proj.pk }}_preference" required>
                                            <option value="" selected disabled>Choose...</option>
                                            <option value="5">Very Interested</option>
                                            <option value="4">Somewhat Interested</option>
                                            <option value="3">Neutral</option>
                                            <option value="2">Uninterested</option>
                                            <option value="1">PLEASE NO</option>
                                        </select>
                                        <div id="projForm{{ proj.pk }}_error" class="invalid-feedback">
                                            Must select a preference for this project.
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <br>
                            {% endfor %}
                        {% endif %}
                        <!-- End Project Listings -->
                        
                        <!-- Attribute Listings -->
                        {% if attributes %}
                            {% for attr in attributes %}
                            <div class="custom-form-box">
                                <div class="form-row align-items-center">
                                    <div class="form-group col-auto my-1">
                                        <label class="h6" for="attrForm{{ attr.pk }}">{{ attr.attr_name }}</label>
                                        <select class="form-control" id="attrForm{{ attr.pk }}" name="attrForm{{ attr.pk }}_preference" required>
                                            <option value="" selected disabled>Choose...</option>
                                            <option value="5">5 (Most preferred)</option>
                                            <option value="4">4</option>
                                            <option value="3">3</option>
                                            <option value="2">2</option>
                                            <option value="1">1 (Least preferred)</option>
                                        </select>
                                        <div id="attrForm{{ attr.pk }}_error" class="invalid-feedback">
                                            Must select a preference for this attribute.
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <br>
                            {% endfor %}
                        {% endif %}
                        <!-- End Attribute Listings -->

                        <!-- Participant Peer Preference -->
                        <div class="custom-form-box">
                            <div class="form-row align-items-center">
                                <div class="form-group col-auto my-1">
                                    <label class="h6" for="participantForm">Participants you would like to work with: (Ctrl+Click for multiple)</label>
                                    <select class="form-control" id="participantForm" name="participantForm_preference" multiple>
                                    {% for p in participants %}
                                        <option value="{{ p.part_name }}">{{ p.part_name }}</option>
                                    {% endfor %}
                                    </select>
                                </div>
                            </div>
                        </div>
                        <br>

                        <button id="submitForm" type="submit" class="btn btn-primary">Submit</button>

                        </form> <!-- End User Response form -->
                    </main>
                </div> <!-- End Main Content row -->
            </div>
        </div>
        
        <!-- Example script for validating forms https://getbootstrap.com/docs/4.5/components/forms -->
        <script>
            // Example starter JavaScript for disabling form submissions if there are invalid fields
            (function() {
                'use strict';
                window.addEventListener('load', function() {
                    // Fetch all the forms we want to apply custom Bootstrap validation styles to
                    var forms = document.getElementsByClassName('needs-validation');
                    // Loop over them and prevent submission
                    var validation = Array.prototype.filter.call(forms, function(form) {
                    form.addEventListener('submit', function(event) {
                        if (form.checkValidity() === false) {
                            event.preventDefault();
                            event.stopPropagation();
                        }
                        form.classList.add('was-validated');
                    }, false);
                    });
                }, false);
            })();
        </script>

        <!-- Bootstrap Scripts (STAY AT BOTTOM) -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>
    </body>

</html>